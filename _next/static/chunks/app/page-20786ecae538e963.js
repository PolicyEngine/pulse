(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{901:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var o=a(5155),r=a(2115);function l(e){let{activeTab:t,onTabChange:a}=e;return(0,o.jsx)("div",{className:"flex space-x-1 mb-8",children:[{id:"standup",label:"Standup"},{id:"survey",label:"Survey"},{id:"results",label:"Results"}].map(e=>(0,o.jsx)("button",{onClick:()=>a(e.id),className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(t===e.id?"bg-[#2C6496] text-white":"bg-slate-100 text-gray-700 hover:bg-slate-200"),style:{fontFamily:"var(--font-roboto)"},children:e.label},e.id))})}function n(e){let{teamMembers:t}=e,[a,l]=(0,r.useState)(t),[n,s]=(0,r.useState)(!1),[i,d]=(0,r.useState)(null),[c,m]=(0,r.useState)({}),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{l(t)},[t]),(0,r.useEffect)(()=>(Object.values(c).some(e=>e.isActive)?u.current=setInterval(()=>{m(e=>{let t={...e};return Object.keys(t).forEach(e=>{if(t[e].isActive){let a=Date.now()-t[e].startTime;t[e].elapsed=a,a>=12e4&&(t[e].isActive=!1,t[e].elapsed=12e4)}}),t})},100):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&clearInterval(u.current)}),[c]),(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",style:{fontFamily:"var(--font-roboto-serif)"},children:"Today's standup order"}),(0,o.jsx)("button",{onClick:()=>{s(!0),setTimeout(()=>{l(function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}(t)),s(!1)},500)},disabled:n,className:"px-6 py-3 bg-[#2C6496] text-white rounded-lg hover:bg-[#1e4668] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",style:{fontFamily:"var(--font-roboto)"},children:n?"Shuffling...":"Randomise order"})]}),(0,o.jsx)("div",{className:"space-y-3",children:a.map((e,t)=>{let a=c[e],r=null==a?void 0:a.isCompleted,l=(null==a?void 0:a.elapsed)||0,s=Math.min(l/12e4*100,100);return(0,o.jsxs)("div",{className:"relative overflow-hidden rounded-lg transition-all duration-300 ".concat(n?"opacity-50 scale-95":"opacity-100 scale-100"," ").concat(r?"bg-green-50":i===e?"bg-slate-100":"bg-slate-50"),onMouseEnter:()=>d(e),onMouseLeave:()=>d(null),children:[a&&!r&&(0,o.jsx)("div",{className:"absolute inset-0 opacity-30 transition-all duration-100",style:{background:"linear-gradient(to right, ".concat((e=>{let t=Math.min(e/12e4,1),a=Math.floor(128+127*t),o=Math.floor(128*(1-t)),r=Math.floor(128*(1-t));return"rgb(".concat(a,", ").concat(o,", ").concat(r,")")})(l)," ").concat(s,"%, transparent ").concat(s,"%)")}}),(0,o.jsxs)("div",{className:"relative flex items-center p-4",children:[(0,o.jsx)("div",{className:"flex-shrink-0 w-10 h-10 ".concat(r?"bg-green-600":"bg-[#2C6496]"," text-white rounded-full flex items-center justify-center font-bold text-sm"),style:{fontFamily:"var(--font-roboto-mono)"},children:r?"âœ“":t+1}),(0,o.jsx)("span",{className:"ml-4 text-lg font-medium flex-grow ".concat(r?"text-gray-500 line-through":"text-gray-700"),style:{fontFamily:"var(--font-roboto)"},children:e}),a&&!r&&(0,o.jsx)("span",{className:"ml-4 text-lg font-mono font-bold",style:{fontFamily:"var(--font-roboto-mono)",color:l>=12e4?"#dc2626":"#374151"},children:(e=>{let t=120-Math.floor(e/1e3),a=Math.floor(t/60);return t>0?"".concat(a,":").concat((t%60).toString().padStart(2,"0")):"Time's up!"})(l)}),r&&(0,o.jsx)("span",{className:"ml-4 text-sm font-medium text-green-600",style:{fontFamily:"var(--font-roboto)"},children:"Completed"}),i===e&&!r&&(0,o.jsxs)(o.Fragment,{children:[!a&&(0,o.jsx)("button",{onClick:()=>{m(t=>{let a={};return Object.keys(t).forEach(o=>{t[o].isActive&&o!==e?a[o]={...t[o],isActive:!1}:a[o]=t[o]}),a[e]={startTime:Date.now(),elapsed:0,isActive:!0,isCompleted:!1},a})},className:"ml-4 px-4 py-2 bg-[#2C6496] text-white rounded-md hover:bg-[#1e4668] transition-colors font-medium text-sm",style:{fontFamily:"var(--font-roboto)"},children:"Start"}),a&&(0,o.jsx)("button",{onClick:()=>{m(t=>({...t,[e]:{...t[e],isActive:!1,isCompleted:!0}}))},className:"ml-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors font-medium text-sm",style:{fontFamily:"var(--font-roboto)"},children:"Done"})]})]})]},e)})})]})}var s=a(5647),i=a(9509);let d=i.env.NEXT_PUBLIC_SUPABASE_URL||"https://mbhrkgzrswaysrmpdehz.supabase.co",c=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI",m=(0,s.UU)(d,c);class u{async getTeamData(){try{let{data:e,error:t}=await m.from("team_members").select("name").order("name");if(t)throw t;return{team:(null==e?void 0:e.map(e=>e.name))||[],meetings:[]}}catch(e){return console.error("Error fetching team data:",e),{team:["Max","Nikhil","Pavel","Anthony","Vahid","Daphne","David","Mar\xeda","Ziming"],meetings:[]}}}async saveTeamData(e){}async getSurveyData(){try{let{data:e,error:t}=await m.from("survey_responses").select("*").order("week_ending",{ascending:!1});if(t)throw t;return{responses:(null==e?void 0:e.map(e=>({name:e.name,weekEnding:e.week_ending,blockedPercentage:e.blocked_percentage,feelSupported:e.feel_supported,workload:e.workload,learnedNewSkills:e.learned_new_skills,meetingProductivity:e.meeting_productivity,soloProductivity:e.solo_productivity,weekQuality:e.week_quality,feedback:e.feedback||"",timestamp:e.created_at})))||[]}}catch(e){return console.error("Error fetching survey data:",e),{responses:[]}}}async saveSurveyResponse(e){try{let{error:t}=await m.from("survey_responses").insert({name:e.name,week_ending:e.weekEnding,blocked_percentage:e.blockedPercentage,feel_supported:e.feelSupported,workload:e.workload,learned_new_skills:e.learnedNewSkills,meeting_productivity:e.meetingProductivity,solo_productivity:e.soloProductivity,week_quality:e.weekQuality,feedback:e.feedback||null});if(t)throw t}catch(e){throw console.error("Error saving survey response:",e),e}}}let y=new u;function f(){let[e,t]=(0,r.useState)({name:"",weekEnding:new Date().toISOString().split("T")[0],blockedPercentage:5,feelSupported:5,workload:5,learnedNewSkills:5,meetingProductivity:5,soloProductivity:5,weekQuality:5,feedback:""}),[a,l]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1),i=async a=>{a.preventDefault(),l(!0);try{await y.saveSurveyResponse(e),s(!0),setTimeout(()=>{s(!1),t({...e,blockedPercentage:5,feelSupported:5,workload:5,learnedNewSkills:5,meetingProductivity:5,soloProductivity:5,weekQuality:5,feedback:""})},3e3)}catch(e){console.error("Error submitting survey:",e)}finally{l(!1)}},d=e=>{let{value:t,onChange:a,label:r}=e;return(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:r}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5,6,7,8,9,10].map(e=>(0,o.jsx)("button",{type:"button",onClick:()=>a(e),className:"w-10 h-10 rounded-lg font-medium transition-colors ".concat(t===e?"bg-[#2C6496] text-white":"bg-slate-100 text-gray-700 hover:bg-slate-200"),style:{fontFamily:"var(--font-roboto-mono)"},children:e},e)),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-500",style:{fontFamily:"var(--font-roboto)"},children:"(1 = Low, 10 = High)"})]})]})};return n?(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,o.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6",children:(0,o.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-3",style:{fontFamily:"var(--font-roboto-serif)"},children:"Thanks for your feedback!"}),(0,o.jsx)("p",{className:"text-gray-600 text-center max-w-md",style:{fontFamily:"var(--font-roboto)"},children:"Your weekly survey has been recorded. We'll review the team's responses during our next meeting."})]})}):(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",style:{fontFamily:"var(--font-roboto-serif)"},children:"Weekly team survey"}),(0,o.jsxs)("form",{onSubmit:i,className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Your name"}),(0,o.jsx)("input",{type:"text",required:!0,value:e.name,onChange:a=>t({...e,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Week ending"}),(0,o.jsx)("input",{type:"date",required:!0,value:e.weekEnding,onChange:a=>t({...e,weekEnding:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"}})]})]}),(0,o.jsx)(d,{label:"What percentage of your time were you blocked on your main task?",value:e.blockedPercentage,onChange:a=>t({...e,blockedPercentage:a})}),(0,o.jsx)(d,{label:"Do you generally feel supported at work?",value:e.feelSupported,onChange:a=>t({...e,feelSupported:a})}),(0,o.jsx)(d,{label:"How's your workload? (1 = underloaded, 5 = perfect, 10 = overloaded)",value:e.workload,onChange:a=>t({...e,workload:a})}),(0,o.jsx)(d,{label:"Did you learn new skills this week?",value:e.learnedNewSkills,onChange:a=>t({...e,learnedNewSkills:a})}),(0,o.jsx)(d,{label:"How productive was your time in meetings?",value:e.meetingProductivity,onChange:a=>t({...e,meetingProductivity:a})}),(0,o.jsx)(d,{label:"How productive was your time outside of meetings?",value:e.soloProductivity,onChange:a=>t({...e,soloProductivity:a})}),(0,o.jsx)(d,{label:"How good was this week overall?",value:e.weekQuality,onChange:a=>t({...e,weekQuality:a})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Additional feedback (optional)"}),(0,o.jsx)("textarea",{value:e.feedback,onChange:a=>t({...e,feedback:a.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"},placeholder:"Optional"})]}),(0,o.jsx)("button",{type:"submit",disabled:a,className:"w-full px-6 py-3 bg-[#2C6496] text-white rounded-lg hover:bg-[#1e4668] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",style:{fontFamily:"var(--font-roboto)"},children:a?"Submitting...":"Submit survey"})]})]})}var g=a(1615);function p(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{s()},[]);let s=async()=>{try{let e=await y.getSurveyData();t(e.responses||[])}catch(e){console.error("Error fetching responses:",e)}finally{l(!1)}};(0,r.useEffect)(()=>{e.length>0&&n.current&&i();let t=()=>{e.length>0&&n.current&&i()};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]);let i=()=>{if(!n.current)return;g.Ltv(n.current).selectAll("*").remove(),g.Ubm(".tooltip").remove();let t=Math.min(n.current.clientWidth-40,800)-60-150,a=170,o=g.zaV(e,e=>({weekQuality:g.i2o(e,e=>e.weekQuality)||0,feelSupported:g.i2o(e,e=>e.feelSupported)||0,soloProductivity:g.i2o(e,e=>e.soloProductivity)||0,meetingProductivity:g.i2o(e,e=>e.meetingProductivity)||0,blockedPercentage:g.i2o(e,e=>e.blockedPercentage)||0,workload:g.i2o(e,e=>e.workload)||0,learnedNewSkills:g.i2o(e,e=>e.learnedNewSkills)||0,count:e.length}),e=>e.weekEnding),r=Array.from(o.keys()).sort(),l=Array.from(o.entries());[{key:"weekQuality",label:"Week quality"},{key:"feelSupported",label:"Feel supported"},{key:"soloProductivity",label:"Solo productivity"},{key:"meetingProductivity",label:"Meeting productivity"},{key:"blockedPercentage",label:"Blocked percentage"},{key:"workload",label:"Workload"},{key:"learnedNewSkills",label:"Learned new skills"}].forEach((e,o)=>{var s;let i=g.Ltv(n.current).append("div").attr("class","mb-8 relative"),d=l[l.length-1][1][e.key],c=l.length>1?l[l.length-2][1][e.key]:d,m=((e,t)=>{let a=e.map(e=>e[1][t]),o=0,r=0;for(let e=Math.max(0,a.length-3);e<a.length;e++)o+=a[e],r++;return r>0?o/r:0})(l,e.key),u=d-c,y=i.append("div").attr("class","flex justify-between items-center mb-4");y.append("h3").attr("class","text-lg font-semibold text-gray-800").style("font-family","var(--font-roboto-serif)").text(e.label);let f=y.append("div").attr("class","flex gap-6 text-sm").style("font-family","var(--font-roboto-mono)");f.append("span").attr("class","text-gray-600").html('Avg: <span class="font-bold text-gray-800">'.concat(m.toFixed(1),"</span>")),f.append("span").attr("class","text-gray-600").html('Last: <span class="font-bold text-gray-800">'.concat(d.toFixed(1),"</span>")),f.append("span").attr("class",u>0?"text-green-600":u<0?"text-red-600":"text-gray-600").text("".concat(u>0?"â†‘":u<0?"â†“":"â†’"," ").concat(Math.abs(u).toFixed(1)));let p=i.append("svg").attr("width",t+60+150).attr("height",a+30+50).append("g").attr("transform","translate(".concat(60,",").concat(30,")")),h=g.w7C().domain([new Date(r[0]),new Date(r[r.length-1])]).range([0,t]),x=g.m4Y().domain([0,10]).range([a,0]),b=g.n8j().x(e=>h(new Date(e[0]))).y(t=>x(t[1][e.key])).curve(g.nVG);p.append("g").attr("transform","translate(0,".concat(a,")")).call(g.l78(h).tickFormat(e=>g.DCK("%d %b")(e)).ticks(r.length)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),p.append("g").call(g.V4s(x).ticks(5)),p.append("text").attr("transform","rotate(-90)").attr("y",-60).attr("x",0-a/2).attr("dy","1em").style("text-anchor","middle").style("font-size","12px").text("Rating (1-10)"),p.append("g").attr("class","grid").attr("transform","translate(0,".concat(a,")")).call(g.l78(h).tickSize(-a).tickFormat(()=>"")).style("stroke-dasharray","3,3").style("opacity",.3),p.append("g").attr("class","grid").call(g.V4s(x).tickSize(-t).tickFormat(()=>"")).style("stroke-dasharray","3,3").style("opacity",.3);let v=p.append("path").datum(l).attr("fill","none").attr("stroke","#2C6496").attr("stroke-width",2).attr("d",b),k=(null==(s=v.node())?void 0:s.getTotalLength())||0;v.attr("stroke-dasharray",k+" "+k).attr("stroke-dashoffset",k).transition().duration(1500).delay(200*o).ease(g.xA2).attr("stroke-dashoffset",0),p.selectAll(".dot").data(l).enter().append("circle").attr("class","dot").attr("cx",e=>h(new Date(e[0]))).attr("cy",t=>x(t[1][e.key])).attr("r",0).attr("fill","#2C6496").transition().duration(300).delay((e,t)=>1500+200*o+100*t).attr("r",4);let w=g.Ltv("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none");setTimeout(()=>{p.selectAll(".dot").on("mouseover",function(t,a){w.transition().duration(200).style("opacity",.9),w.html("Week: ".concat(new Date(a[0]).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),"<br/>\n                         Average: ").concat(a[1][e.key].toFixed(1),"<br/>\n                         Responses: ").concat(a[1].count)).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")}).on("mouseout",function(){w.transition().duration(500).style("opacity",0)})},2e3+200*o)})};return a?(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,o.jsx)("div",{className:"py-12 text-gray-500",children:"Loading survey results..."})}):0===e.length?(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,o.jsx)("div",{className:"py-12 text-gray-500",children:"No survey responses yet."})}):(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",style:{fontFamily:"var(--font-roboto-serif)"},children:"Team health metrics over time"}),(0,o.jsx)("div",{ref:n})]})}function h(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)("standup");return(0,r.useEffect)(()=>{y.getTeamData().then(e=>{t(e.team)})},[]),(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,o.jsxs)("header",{className:"mb-12",children:[(0,o.jsx)("h1",{className:"text-5xl font-bold text-[#2C6496] mb-4",style:{fontFamily:"var(--font-roboto-serif)"},children:"PolicyEngine pulse"}),(0,o.jsx)("p",{className:"text-xl text-gray-600",style:{fontFamily:"var(--font-roboto)"},children:"Team meeting coordination hub"})]}),(0,o.jsxs)("div",{className:"max-w-4xl",children:[(0,o.jsx)(l,{activeTab:a,onTabChange:s}),"standup"===a&&(0,o.jsx)(n,{teamMembers:e}),"survey"===a&&(0,o.jsx)(f,{}),"results"===a&&(0,o.jsx)(p,{}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsxs)("p",{className:"text-sm text-gray-600",style:{fontFamily:"var(--font-roboto-mono)"},children:["Meeting started at ",new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})})]})]})})}},2194:(e,t,a)=>{Promise.resolve().then(a.bind(a,901))}},e=>{e.O(0,[654,441,964,358],()=>e(e.s=2194)),_N_E=e.O()}]);