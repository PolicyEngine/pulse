(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2194:(e,t,o)=>{Promise.resolve().then(o.bind(o,9272))},9272:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>b});var r=o(5155),a=o(2115);function l(e){let{activeTab:t,onTabChange:o}=e;return(0,r.jsx)("div",{className:"flex space-x-1 mb-8",children:[{id:"standup",label:"Standup"},{id:"survey",label:"Survey"},{id:"results",label:"Results"}].map(e=>(0,r.jsx)("button",{onClick:()=>o(e.id),className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(t===e.id?"bg-[#2C6496] text-white":"bg-slate-100 text-gray-700 hover:bg-slate-200"),style:{fontFamily:"var(--font-roboto)"},children:e.label},e.id))})}function s(e){let{teamMembers:t}=e,[o,l]=(0,a.useState)(t),[s,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(null),[d,u]=(0,a.useState)({}),m=(0,a.useRef)(null);return(0,a.useEffect)(()=>{l(t)},[t]),(0,a.useEffect)(()=>(Object.values(d).some(e=>e.isActive)?m.current=setInterval(()=>{u(e=>{let t={...e};return Object.keys(t).forEach(e=>{if(t[e].isActive){let o=Date.now()-t[e].startTime;t[e].elapsed=o,o>=12e4&&(t[e].isActive=!1,t[e].elapsed=12e4)}}),t})},100):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&clearInterval(m.current)}),[d]),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",style:{fontFamily:"var(--font-roboto-serif)"},children:"Today's standup order"}),(0,r.jsx)("button",{onClick:()=>{n(!0),setTimeout(()=>{l(function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}return t}(t)),n(!1)},500)},disabled:s,className:"px-6 py-3 bg-[#2C6496] text-white rounded-lg hover:bg-[#1e4668] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",style:{fontFamily:"var(--font-roboto)"},children:s?"Shuffling...":"Randomise order"})]}),(0,r.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>{let o=d[e],a=null==o?void 0:o.isCompleted,l=(null==o?void 0:o.elapsed)||0,n=Math.min(l/12e4*100,100);return(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-lg transition-all duration-300 ".concat(s?"opacity-50 scale-95":"opacity-100 scale-100"," ").concat(a?"bg-green-50":i===e?"bg-slate-100":"bg-slate-50"),onMouseEnter:()=>c(e),onMouseLeave:()=>c(null),children:[o&&!a&&(0,r.jsx)("div",{className:"absolute inset-0 opacity-30 transition-all duration-100",style:{background:"linear-gradient(to right, ".concat((e=>{let t=Math.min(e/12e4,1),o=Math.floor(128+127*t),r=Math.floor(128*(1-t)),a=Math.floor(128*(1-t));return"rgb(".concat(o,", ").concat(r,", ").concat(a,")")})(l)," ").concat(n,"%, transparent ").concat(n,"%)")}}),(0,r.jsxs)("div",{className:"relative flex items-center p-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 ".concat(a?"bg-green-600":"bg-[#2C6496]"," text-white rounded-full flex items-center justify-center font-bold text-sm"),style:{fontFamily:"var(--font-roboto-mono)"},children:a?"✓":t+1}),(0,r.jsx)("span",{className:"ml-4 text-lg font-medium flex-grow ".concat(a?"text-gray-500 line-through":"text-gray-700"),style:{fontFamily:"var(--font-roboto)"},children:e}),o&&!a&&(0,r.jsx)("span",{className:"ml-4 text-lg font-mono font-bold",style:{fontFamily:"var(--font-roboto-mono)",color:l>=12e4?"#dc2626":"#374151"},children:(e=>{let t=120-Math.floor(e/1e3),o=Math.floor(t/60);return t>0?"".concat(o,":").concat((t%60).toString().padStart(2,"0")):"Time's up!"})(l)}),a&&(0,r.jsx)("span",{className:"ml-4 text-sm font-medium text-green-600",style:{fontFamily:"var(--font-roboto)"},children:"Completed"}),i===e&&!a&&(0,r.jsxs)(r.Fragment,{children:[!o&&(0,r.jsx)("button",{onClick:()=>{u(t=>{let o={};return Object.keys(t).forEach(r=>{t[r].isActive&&r!==e?o[r]={...t[r],isActive:!1}:o[r]=t[r]}),o[e]={startTime:Date.now(),elapsed:0,isActive:!0,isCompleted:!1},o})},className:"ml-4 px-4 py-2 bg-[#2C6496] text-white rounded-md hover:bg-[#1e4668] transition-colors font-medium text-sm",style:{fontFamily:"var(--font-roboto)"},children:"Start"}),o&&(0,r.jsx)("button",{onClick:()=>{u(t=>({...t,[e]:{...t[e],isActive:!1,isCompleted:!0}}))},className:"ml-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors font-medium text-sm",style:{fontFamily:"var(--font-roboto)"},children:"Done"})]})]})]},e)})})]})}var n=o(5647),i=o(9509);let c=i.env.NEXT_PUBLIC_SUPABASE_URL||"https://mbhrkgzrswaysrmpdehz.supabase.co",d=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI";console.log("=== SUPABASE INIT START ==="),console.log("URL:",c),console.log("Key exists:",!!d),console.log("Environment:","browser");let u=(0,n.UU)(c,d,{auth:{persistSession:!1,autoRefreshToken:!1},global:{headers:{"x-source":"policyengine-pulse"}}});console.log("Supabase client created:",!!u),console.log("=== SUPABASE INIT END ===");{let e=u.from.bind(u);u.from=t=>{console.log("[Supabase] Accessing table: ".concat(t));let o=e(t),r=o.select.bind(o);o.select=function(){for(var e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];console.log("[Supabase] SELECT from ".concat(t),o);let l=r(...o),s=l.then.bind(l);return l.then=(e,o)=>s(o=>(console.log("[Supabase] SELECT ".concat(t," result:"),o),null==e?void 0:e(o)),e=>(console.error("[Supabase] SELECT ".concat(t," error:"),e),null==o?void 0:o(e))),l};let a=o.insert.bind(o);return o.insert=function(){for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];console.log("[Supabase] INSERT into ".concat(t),o);let l=a(...o),s=l.then.bind(l);return l.then=(e,o)=>s(o=>(console.log("[Supabase] INSERT ".concat(t," result:"),o),null==e?void 0:e(o)),e=>(console.error("[Supabase] INSERT ".concat(t," error:"),e),null==o?void 0:o(e))),l},o}}class m{async getTeamData(){try{let{data:e,error:t}=await u.from("team_members").select("name").order("name");if(t)throw t;return{team:(null==e?void 0:e.map(e=>e.name))||[],meetings:[]}}catch(e){return console.error("Error fetching team data:",e),{team:["Max","Nikhil","Pavel","Anthony","Vahid","Daphne","David","Mar\xeda","Ziming"],meetings:[]}}}async saveTeamData(e){}async getSurveyData(){try{console.log("Fetching survey data from Supabase...");let{data:e,error:t}=await u.from("survey_responses").select("*").order("week_ending",{ascending:!1});if(t)throw console.error("Supabase error:",t),t;return console.log("Raw data from Supabase:",e),{responses:(null==e?void 0:e.map(e=>({name:e.name,weekEnding:e.week_ending,blockedPercentage:e.blocked_percentage,feelSupported:e.feel_supported,workload:e.workload,learnedNewSkills:e.learned_new_skills,meetingProductivity:e.meeting_productivity,soloProductivity:e.solo_productivity,weekQuality:e.week_quality,feedback:e.feedback||"",timestamp:e.created_at})))||[]}}catch(e){return console.error("Error fetching survey data:",e),e instanceof Error&&console.error("Error details:",e.message,e.stack),{responses:[]}}}async saveSurveyResponse(e){try{console.log("Saving survey response:",e);let{error:t}=await u.from("survey_responses").insert({name:e.name,week_ending:e.weekEnding,blocked_percentage:e.blockedPercentage,feel_supported:e.feelSupported,workload:e.workload,learned_new_skills:e.learnedNewSkills,meeting_productivity:e.meetingProductivity,solo_productivity:e.soloProductivity,week_quality:e.weekQuality,feedback:e.feedback||null});if(t)throw console.error("Supabase insert error:",t),t;console.log("Survey response saved successfully")}catch(e){throw console.error("Error saving survey response:",e),e instanceof Error&&console.error("Error details:",e.message,e.stack),e}}}let g=new m;function y(){let[e,t]=(0,a.useState)({name:"",weekEnding:new Date().toISOString().split("T")[0],blockedPercentage:5,feelSupported:5,workload:5,learnedNewSkills:5,meetingProductivity:5,soloProductivity:5,weekQuality:5,feedback:""}),[o,l]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(null),d=async o=>{o.preventDefault(),l(!0),c(null);try{console.log("Submitting survey form:",e),await g.saveSurveyResponse(e),n(!0),setTimeout(()=>{n(!1),t({...e,blockedPercentage:5,feelSupported:5,workload:5,learnedNewSkills:5,meetingProductivity:5,soloProductivity:5,weekQuality:5,feedback:""})},3e3)}catch(e){console.error("Error submitting survey:",e),c(e instanceof Error?e.message:"Failed to submit survey. Check console for details.")}finally{l(!1)}},u=e=>{let{value:t,onChange:o,label:a}=e;return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:a}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5,6,7,8,9,10].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>o(e),className:"w-10 h-10 rounded-lg font-medium transition-colors ".concat(t===e?"bg-[#2C6496] text-white":"bg-slate-100 text-gray-700 hover:bg-slate-200"),style:{fontFamily:"var(--font-roboto-mono)"},children:e},e)),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-500",style:{fontFamily:"var(--font-roboto)"},children:"(1 = Low, 10 = High)"})]})]})};return s?(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-3",style:{fontFamily:"var(--font-roboto-serif)"},children:"Thanks for your feedback!"}),(0,r.jsx)("p",{className:"text-gray-600 text-center max-w-md",style:{fontFamily:"var(--font-roboto)"},children:"Your weekly survey has been recorded. We'll review the team's responses during our next meeting."})]})}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",style:{fontFamily:"var(--font-roboto-serif)"},children:"Weekly team survey"}),(0,r.jsxs)("form",{onSubmit:d,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Your name"}),(0,r.jsx)("input",{type:"text",required:!0,value:e.name,onChange:o=>t({...e,name:o.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Week ending"}),(0,r.jsx)("input",{type:"date",required:!0,value:e.weekEnding,onChange:o=>t({...e,weekEnding:o.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"}})]})]}),(0,r.jsx)(u,{label:"What percentage of your time were you blocked on your main task?",value:e.blockedPercentage,onChange:o=>t({...e,blockedPercentage:o})}),(0,r.jsx)(u,{label:"Do you generally feel supported at work?",value:e.feelSupported,onChange:o=>t({...e,feelSupported:o})}),(0,r.jsx)(u,{label:"How's your workload? (1 = underloaded, 5 = perfect, 10 = overloaded)",value:e.workload,onChange:o=>t({...e,workload:o})}),(0,r.jsx)(u,{label:"Did you learn new skills this week?",value:e.learnedNewSkills,onChange:o=>t({...e,learnedNewSkills:o})}),(0,r.jsx)(u,{label:"How productive was your time in meetings?",value:e.meetingProductivity,onChange:o=>t({...e,meetingProductivity:o})}),(0,r.jsx)(u,{label:"How productive was your time outside of meetings?",value:e.soloProductivity,onChange:o=>t({...e,soloProductivity:o})}),(0,r.jsx)(u,{label:"How good was this week overall?",value:e.weekQuality,onChange:o=>t({...e,weekQuality:o})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"var(--font-roboto)"},children:"Additional feedback (optional)"}),(0,r.jsx)("textarea",{value:e.feedback,onChange:o=>t({...e,feedback:o.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2C6496] focus:border-transparent",style:{fontFamily:"var(--font-roboto)"},placeholder:"Optional"})]}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"w-full px-6 py-3 bg-[#2C6496] text-white rounded-lg hover:bg-[#1e4668] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",style:{fontFamily:"var(--font-roboto)"},children:o?"Submitting...":"Submit survey"}),i&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-700 text-sm",style:{fontFamily:"var(--font-roboto)"},children:i})})]})]})}var p=o(1615);function h(){let[e,t]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(""),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{console.log("ResultsTab mounted"),c(e=>e+"\nResultsTab mounted"),u()},[]);let u=async()=>{console.log("fetchResponses called"),c(e=>e+"\nfetchResponses called");try{console.log("About to call dataService.getSurveyData()"),c(e=>e+"\nCalling dataService...");let e=await g.getSurveyData();console.log("Fetched survey data:",e),c(t=>t+"\nGot data: "+JSON.stringify(e).substring(0,100)),t(e.responses||[])}catch(e){console.error("Error fetching responses:",e),n(String(e)),c(t=>t+"\nError: "+String(e))}finally{l(!1),c(e=>e+"\nLoading complete")}};(0,a.useEffect)(()=>{e.length>0&&d.current&&m();let t=()=>{e.length>0&&d.current&&m()};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]);let m=()=>{if(!d.current)return;p.Ltv(d.current).selectAll("*").remove(),p.Ubm(".tooltip").remove();let t=Math.min(d.current.clientWidth-40,800)-60-150,o=170,r=p.zaV(e,e=>({weekQuality:p.i2o(e,e=>e.weekQuality)||0,feelSupported:p.i2o(e,e=>e.feelSupported)||0,soloProductivity:p.i2o(e,e=>e.soloProductivity)||0,meetingProductivity:p.i2o(e,e=>e.meetingProductivity)||0,blockedPercentage:p.i2o(e,e=>e.blockedPercentage)||0,workload:p.i2o(e,e=>e.workload)||0,learnedNewSkills:p.i2o(e,e=>e.learnedNewSkills)||0,count:e.length}),e=>e.weekEnding),a=Array.from(r.keys()).sort(),l=Array.from(r.entries());[{key:"weekQuality",label:"Week quality"},{key:"feelSupported",label:"Feel supported"},{key:"soloProductivity",label:"Solo productivity"},{key:"meetingProductivity",label:"Meeting productivity"},{key:"blockedPercentage",label:"Blocked percentage"},{key:"workload",label:"Workload"},{key:"learnedNewSkills",label:"Learned new skills"}].forEach((e,r)=>{var s;let n=p.Ltv(d.current).append("div").attr("class","mb-8 relative"),i=l[l.length-1][1][e.key],c=l.length>1?l[l.length-2][1][e.key]:i,u=((e,t)=>{let o=e.map(e=>e[1][t]),r=0,a=0;for(let e=Math.max(0,o.length-3);e<o.length;e++)r+=o[e],a++;return a>0?r/a:0})(l,e.key),m=i-c,g=n.append("div").attr("class","flex justify-between items-center mb-4");g.append("h3").attr("class","text-lg font-semibold text-gray-800").style("font-family","var(--font-roboto-serif)").text(e.label);let y=g.append("div").attr("class","flex gap-6 text-sm").style("font-family","var(--font-roboto-mono)");y.append("span").attr("class","text-gray-600").html('Avg: <span class="font-bold text-gray-800">'.concat(u.toFixed(1),"</span>")),y.append("span").attr("class","text-gray-600").html('Last: <span class="font-bold text-gray-800">'.concat(i.toFixed(1),"</span>")),y.append("span").attr("class",m>0?"text-green-600":m<0?"text-red-600":"text-gray-600").text("".concat(m>0?"↑":m<0?"↓":"→"," ").concat(Math.abs(m).toFixed(1)));let h=n.append("svg").attr("width",t+60+150).attr("height",o+30+50).append("g").attr("transform","translate(".concat(60,",").concat(30,")")),f=p.w7C().domain([new Date(a[0]),new Date(a[a.length-1])]).range([0,t]),b=p.m4Y().domain([0,10]).range([o,0]),x=p.n8j().x(e=>f(new Date(e[0]))).y(t=>b(t[1][e.key])).curve(p.nVG);h.append("g").attr("transform","translate(0,".concat(o,")")).call(p.l78(f).tickFormat(e=>p.DCK("%d %b")(e)).ticks(a.length)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),h.append("g").call(p.V4s(b).ticks(5)),h.append("text").attr("transform","rotate(-90)").attr("y",-60).attr("x",0-o/2).attr("dy","1em").style("text-anchor","middle").style("font-size","12px").text("Rating (1-10)"),h.append("g").attr("class","grid").attr("transform","translate(0,".concat(o,")")).call(p.l78(f).tickSize(-o).tickFormat(()=>"")).style("stroke-dasharray","3,3").style("opacity",.3),h.append("g").attr("class","grid").call(p.V4s(b).tickSize(-t).tickFormat(()=>"")).style("stroke-dasharray","3,3").style("opacity",.3);let v=h.append("path").datum(l).attr("fill","none").attr("stroke","#2C6496").attr("stroke-width",2).attr("d",x),w=(null==(s=v.node())?void 0:s.getTotalLength())||0;v.attr("stroke-dasharray",w+" "+w).attr("stroke-dashoffset",w).transition().duration(1500).delay(200*r).ease(p.xA2).attr("stroke-dashoffset",0),h.selectAll(".dot").data(l).enter().append("circle").attr("class","dot").attr("cx",e=>f(new Date(e[0]))).attr("cy",t=>b(t[1][e.key])).attr("r",0).attr("fill","#2C6496").transition().duration(300).delay((e,t)=>1500+200*r+100*t).attr("r",4);let k=p.Ltv("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none");setTimeout(()=>{h.selectAll(".dot").on("mouseover",function(t,o){k.transition().duration(200).style("opacity",.9),k.html("Week: ".concat(new Date(o[0]).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),"<br/>\n                         Average: ").concat(o[1][e.key].toFixed(1),"<br/>\n                         Responses: ").concat(o[1].count)).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")}).on("mouseout",function(){k.transition().duration(500).style("opacity",0)})},2e3+200*r)})};return o?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsx)("div",{className:"py-12 text-gray-500",children:"Loading survey results..."}),(0,r.jsx)("pre",{className:"mt-4 p-4 bg-gray-100 text-xs",children:i})]}):0===e.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsx)("div",{className:"py-12 text-gray-500",children:"No survey responses yet."}),s&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded",children:(0,r.jsxs)("p",{className:"text-red-700",children:["Error: ",s]})}),(0,r.jsxs)("pre",{className:"mt-4 p-4 bg-gray-100 text-xs overflow-auto",children:["Debug info:",i]}),(0,r.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,r.jsx)("button",{onClick:async()=>{console.log("Direct test clicked"),c(e=>e+"\nDirect test clicked");try{let e=await fetch("https://mbhrkgzrswaysrmpdehz.supabase.co/rest/v1/survey_responses",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI"}}),t=await e.json();c(e=>e+"\nDirect fetch: "+JSON.stringify(t).substring(0,200)),alert("Got "+(Array.isArray(t)?t.length:0)+" records")}catch(e){c(t=>t+"\nDirect fetch error: "+String(e))}},className:"px-4 py-2 bg-green-600 text-white rounded-lg",children:"Test Direct Fetch"}),(0,r.jsx)("button",{onClick:()=>{l(!0),u()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Retry with Supabase Client"})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",style:{fontFamily:"var(--font-roboto-serif)"},children:"Team health metrics over time"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:async()=>{console.log("Test button clicked");try{console.log("Making direct Supabase call...");let e=await fetch("https://mbhrkgzrswaysrmpdehz.supabase.co/rest/v1/survey_responses",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1iaHJrZ3pyc3dheXNybXBkZWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTU2NjAsImV4cCI6MjA3MDA5MTY2MH0._JP4S6jVxYt0w7mSL2Rci59pSii0kDK1g9qfgFFtXKI"}}),t=await e.json();console.log("Direct fetch result:",t),alert("Check console - got "+(Array.isArray(t)?t.length:0)+" records")}catch(e){console.error("Direct fetch error:",e),alert("Error: "+e)}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",style:{fontFamily:"var(--font-roboto)"},children:"Test API"}),(0,r.jsx)("button",{onClick:()=>{l(!0),u()},className:"px-4 py-2 bg-[#2C6496] text-white rounded-lg hover:bg-[#1e4268] transition-colors",style:{fontFamily:"var(--font-roboto)"},children:"Refresh"})]})]}),(0,r.jsx)("div",{ref:d})]})}function f(){let[e,t]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(window.location.hostname.includes("github.io")){l(!0);let e=console.log,o=console.error,r=console.warn,a=function(a){for(var l=arguments.length,s=Array(l>1?l-1:0),n=1;n<l;n++)s[n-1]=arguments[n];let i="[".concat(a,"] ").concat(s.map(e=>"object"==typeof e?JSON.stringify(e,null,2):String(e)).join(" "));t(e=>[...e.slice(-19),i]),"LOG"===a&&e(...s),"ERROR"===a&&o(...s),"WARN"===a&&r(...s)};return console.log=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return a("LOG",...t)},console.error=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return a("ERROR",...t)},console.warn=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return a("WARN",...t)},console.log("Debug panel active"),console.log("URL:",window.location.href),console.log("Supabase loaded:","supabase"in window),()=>{console.log=e,console.error=o,console.warn=r}}},[]),o)?(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 max-h-64 bg-black text-green-400 p-4 rounded-lg shadow-lg overflow-y-auto font-mono text-xs z-50",children:[(0,r.jsx)("div",{className:"mb-2 text-yellow-400",children:"\uD83D\uDD0D Debug Console"}),0===e.length?(0,r.jsx)("div",{className:"text-gray-400",children:"No logs yet..."}):e.map((e,t)=>(0,r.jsx)("div",{className:"mb-1 whitespace-pre-wrap break-all",children:e},t))]}):null}function b(){let[e,t]=(0,a.useState)([]),[o,n]=(0,a.useState)("standup");return(0,a.useEffect)(()=>{setTimeout(()=>{let e=window.fetch;window.fetch=async function(){for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];let[a,l]=o;console.group("\uD83C\uDF10 Network Request: ".concat("string"==typeof a?a:a.toString())),console.log("Method:",(null==l?void 0:l.method)||"GET"),console.log("Headers:",null==l?void 0:l.headers),console.log("Body:",null==l?void 0:l.body),console.groupEnd();try{let t=await e(...o);console.group("✅ Network Response: ".concat("string"==typeof a?a:a.toString())),console.log("Status:",t.status,t.statusText),console.log("Headers:",Object.fromEntries(t.headers.entries()));let r=t.clone();try{let e=await r.text(),t=e?JSON.parse(e):null;console.log("Body:",t)}catch(e){console.log("Body: (unable to parse)")}return console.groupEnd(),t}catch(e){throw console.group("❌ Network Error: ".concat("string"==typeof a?a:a.toString())),console.error("Error:",e),console.groupEnd(),e}},console.log("\uD83D\uDD0D Network debugging enabled")},100),console.group("\uD83D\uDD27 Environment Check"),console.log("URL:",window.location.href),console.log("Origin:",window.location.origin),console.log("Protocol:",window.location.protocol),console.log("User Agent:",navigator.userAgent),console.log("Cookies Enabled:",navigator.cookieEnabled),console.log("Online:",navigator.onLine),console.log("GitHub Pages:",window.location.hostname.includes("github.io"));try{localStorage.setItem("test","test"),localStorage.removeItem("test"),console.log("localStorage:","Available")}catch(e){console.log("localStorage:","Blocked")}console.groupEnd(),g.getTeamData().then(e=>{t(e.team)}).catch(e=>{console.error("Failed to load team data:",e)})},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,r.jsxs)("header",{className:"mb-12",children:[(0,r.jsx)("h1",{className:"text-5xl font-bold text-[#2C6496] mb-4",style:{fontFamily:"var(--font-roboto-serif)"},children:"PolicyEngine pulse"}),(0,r.jsx)("p",{className:"text-xl text-gray-600",style:{fontFamily:"var(--font-roboto)"},children:"Team meeting coordination hub"})]}),(0,r.jsxs)("div",{className:"max-w-4xl",children:[(0,r.jsx)(l,{activeTab:o,onTabChange:n}),"standup"===o&&(0,r.jsx)(s,{teamMembers:e}),"survey"===o&&(0,r.jsx)(y,{}),"results"===o&&(0,r.jsx)(h,{}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",style:{fontFamily:"var(--font-roboto-mono)"},children:["Meeting started at ",new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})})]})]}),(0,r.jsx)(f,{})]})}}},e=>{e.O(0,[654,441,964,358],()=>e(e.s=2194)),_N_E=e.O()}]);